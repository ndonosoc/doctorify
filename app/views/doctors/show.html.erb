<div class="container">
  <div class="row">
    <div class="col-12 col-md-8 mb-4">
      <%= render "profile-card", doctor: @doctor %>
    </div>
    <div class="col-12 col-md-4">

          <div id="map" style="width: 100%; height: 100%;"
            data-markers="<%= @markers.to_json %>"
            data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-md-8">
      <%= render "profile-info", doctor: @doctor%>
      <button type="button" class="btn btn-primary form-control" data-toggle="modal" data-target="#newAppointment">
      Book now!</button>
      <h2 class="mt-5 mb-3">Reviews</h2>
      <div>
        <% if !@doctor.bookings.empty? %>
          <% @doctor.bookings.each do |booking| %>
          <% if !booking.review.nil? %>
            <%= render "review-card", review: booking.review %>
           <% end %>
          <% end %>
        <% else %>
          <p>This doctor has not been reviewed yet.</p>
        <% end %>
      </div>
    </div>
  </div>
</div>
<%= render "booking-modal", doctor: @doctor, appointment: @appointment %>
